{% extends 'base.html.twig' %}

{% block title %}Recherche :
	{{ query }}
	- Gabriel.dev
{% endblock %}

{% block body %}
	<h1>Resultats de recherche</h1>
	<p class="text-muted">{{ posts|length }}
		resultat(s) pour «
		<strong>{{ query }}</strong>
		»</p>

	{% if posts is empty %}
		<div class="alert alert-info">Aucun article ne correspond a votre recherche.</div>
	{% else %}
		<div class="row">
			{% for post in posts %}
				<div class="col-md-5 mb-4">
					<div class="card h-100">
						{% if post.picture %}
							<img src="{{ post.picture }}" class="card-img-top" alt="{{ post.title }}" style="height: 220px; object-fit: cover;">
						{% endif %}
						<div class="card-body">
							<span class="badge mb-2" style="background-color: {{ post.category.color ?? '#6c757d' }}">{{ post.category.name }}</span>
							<h5 class="card-title">{{ post.title }}</h5>
							<p class="card-text">{{ post.content|slice(0, 200) }}...</p>
							<div class="d-flex align-items-center mt-2">
								{% if post.author.profilePicture %}
									<img src="{{ asset('uploads/profiles/' ~ post.author.profilePicture) }}" alt="{{ post.author.firstName }}" class="rounded-circle me-2" style="width: 25px; height: 25px; object-fit: cover;">
								{% endif %}
								<small class="text-muted">Par
									{{ post.author.firstName }}
									{{ post.author.lastName }}
									le
									{{ post.publishedAt|date('d/m/Y') }}</small>
							</div>
						</div>
						<div class="card-footer d-flex justify-content-between align-items-center">
							<span class="text-muted">
								<small>{{ post.comments|length }}
									commentaire(s)</small>
							</span>
							<a href="{{ path('app_post_show', {slug: post.slug}) }}" class="btn btn-sm btn-outline-primary">Lire</a>
						</div>
					</div>
				</div>
			{% endfor %}
		</div>
	{% endif %}
{% endblock %}
